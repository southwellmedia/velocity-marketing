---
/**
 * MarketingIcon — Custom hand-crafted SVG icons for the marketing landing page.
 * Each icon uses multiple SVG primitives for richer visual character,
 * designed to render cleanly at 16–20px with a 24x24 viewBox.
 *
 * Usage:
 *   <MarketingIcon name="mkt-speed" size="sm" />
 */
import { cn } from '@/lib/cn';

interface Props {
  name: string;
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl';
  class?: string;
  strokeWidth?: number;
}

const { name, size = 'md', class: className, strokeWidth = 2 } = Astro.props;

const sizes = {
  xs: 'w-3 h-3',
  sm: 'w-4 h-4',
  md: 'w-5 h-5',
  lg: 'w-6 h-6',
  xl: 'w-8 h-8',
};

// Each icon is an array of SVG element descriptors.
// 'type' is the SVG element tag; all other keys are attributes.
// Elements with fill="current" get fill="currentColor"; stroke="none" suppresses stroke.
type SvgElement = Record<string, string | number>;

const icons: Record<string, SvgElement[]> = {
  /**
   * mkt-tokens — Design Token System
   * Three cascading swatch chips stepping diagonally up-right,
   * each with a small filled dot representing a token value.
   */
  'mkt-tokens': [
    { type: 'rect', x: '2', y: '15', width: '14', height: '5', rx: '2' },
    { type: 'rect', x: '6', y: '10', width: '14', height: '5', rx: '2' },
    { type: 'rect', x: '10', y: '5', width: '12', height: '5', rx: '2' },
    { type: 'circle', cx: '5', cy: '17.5', r: '1.5', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '9', cy: '12.5', r: '1.5', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '13', cy: '7.5', r: '1.5', fill: 'current', stroke: 'none' },
  ],

  /**
   * mkt-globe — Built-in i18n
   * Globe with elliptical meridian, equator, latitude lines, and a
   * dashed routing arc connecting two location dots (suggesting locale routing).
   */
  'mkt-globe': [
    { type: 'circle', cx: '12', cy: '12', r: '10' },
    { type: 'ellipse', cx: '12', cy: '12', rx: '4', ry: '10', fill: 'none' },
    { type: 'line', x1: '2', y1: '12', x2: '22', y2: '12' },
    { type: 'line', x1: '4.5', y1: '7', x2: '19.5', y2: '7' },
    { type: 'line', x1: '4.5', y1: '17', x2: '19.5', y2: '17' },
    { type: 'circle', cx: '8', cy: '7', r: '1.5', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '16', cy: '16', r: '1.5', fill: 'current', stroke: 'none' },
    { type: 'path', d: 'M9 7.5 Q12 10 15.2 15.5', fill: 'none', 'stroke-dasharray': '2.5 2' },
  ],

  /**
   * mkt-shield — Consent & GDPR
   * Shield with an embedded padlock — conveys protection and trusted consent.
   */
  'mkt-shield': [
    { type: 'path', d: 'M12 2.5l8 3v5.5c0 5-3.6 9.7-8 11-4.4-1.3-8-6-8-11V5.5l8-3z', fill: 'none' },
    { type: 'rect', x: '9.5', y: '12', width: '5', height: '4.5', rx: '1', fill: 'none' },
    { type: 'path', d: 'M10.5 12v-1.5a1.5 1.5 0 0 1 3 0V12', fill: 'none' },
    { type: 'circle', cx: '12', cy: '14.2', r: '0.8', fill: 'current', stroke: 'none' },
  ],

  /**
   * mkt-content — Content & Search
   * A document framed inside a magnifying glass lens, with lines
   * suggesting structured content — merges content management and search.
   */
  'mkt-content': [
    { type: 'circle', cx: '11', cy: '11', r: '8' },
    { type: 'line', x1: '17', y1: '17', x2: '22', y2: '22' },
    { type: 'path', d: 'M8 7.5h4l1.5 1.5v7H8V7.5z', fill: 'none' },
    { type: 'path', d: 'M12 7.5v1.5h1.5', fill: 'none' },
    { type: 'line', x1: '9.5', y1: '11', x2: '12', y2: '11' },
    { type: 'line', x1: '9.5', y1: '13', x2: '12', y2: '13' },
    { type: 'line', x1: '9.5', y1: '15', x2: '11', y2: '15' },
  ],

  /**
   * mkt-components — 57+ Production Components
   * A 2×2 grid of rounded module tiles with a central plus connector,
   * and accent dots on two tiles — suggests a modular component library.
   */
  'mkt-components': [
    { type: 'rect', x: '2', y: '2', width: '8.5', height: '8.5', rx: '1.5' },
    { type: 'rect', x: '13.5', y: '2', width: '8.5', height: '8.5', rx: '1.5' },
    { type: 'rect', x: '2', y: '13.5', width: '8.5', height: '8.5', rx: '1.5' },
    { type: 'rect', x: '13.5', y: '13.5', width: '8.5', height: '8.5', rx: '1.5' },
    { type: 'line', x1: '10.5', y1: '12', x2: '13.5', y2: '12' },
    { type: 'line', x1: '12', y1: '10.5', x2: '12', y2: '13.5' },
    { type: 'circle', cx: '6.25', cy: '6.25', r: '1.5', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '17.75', cy: '17.75', r: '1.5', fill: 'current', stroke: 'none' },
  ],

  /**
   * mkt-speed — Built for Speed / Performance
   * A speedometer with a semicircular arc, three tick marks, a needle
   * pointing upper-right (maximum speed), and a small lightning bolt accent.
   */
  'mkt-speed': [
    { type: 'path', d: 'M4.5 18.5a10 10 0 0 1 15 0', fill: 'none' },
    { type: 'line', x1: '4.5', y1: '18.5', x2: '6.5', y2: '18.5' },
    { type: 'line', x1: '12', y1: '8.5', x2: '12', y2: '10.5' },
    { type: 'line', x1: '19.5', y1: '18.5', x2: '17.5', y2: '18.5' },
    { type: 'line', x1: '12', y1: '18', x2: '17.5', y2: '11' },
    { type: 'circle', cx: '12', cy: '18', r: '1.8', fill: 'current', stroke: 'none' },
    { type: 'path', d: 'M18 5.5l-2 3h1.5L16 11', fill: 'none', 'stroke-width': '1.5' },
  ],

  /**
   * mkt-seo — SEO & Dynamic OG Images
   * Magnifying glass with an upward-trending analytics line inside the lens,
   * plus signal/broadcast arcs at top-right suggesting social/OG sharing.
   */
  'mkt-seo': [
    { type: 'circle', cx: '10.5', cy: '10.5', r: '7.5' },
    { type: 'line', x1: '16.5', y1: '16.5', x2: '22', y2: '22' },
    { type: 'path', d: 'M5.5 13.5L8 10.5L11 12L14 7.5', fill: 'none' },
    { type: 'path', d: 'M18 5a3 3 0 0 1 0 4', fill: 'none' },
    { type: 'path', d: 'M19.5 3.5a5.5 5.5 0 0 1 0 7', fill: 'none' },
  ],

  /**
   * mkt-code — Zero JavaScript
   * Terminal window with title bar, window control dots, a prompt chevron,
   * and a zero ellipse — visualises a lightweight, JS-free output.
   */
  'mkt-code': [
    { type: 'rect', x: '2', y: '3', width: '20', height: '18', rx: '3' },
    { type: 'line', x1: '2', y1: '9', x2: '22', y2: '9' },
    { type: 'circle', cx: '6', cy: '6', r: '1.2', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '10', cy: '6', r: '1.2', fill: 'current', stroke: 'none' },
    { type: 'circle', cx: '14', cy: '6', r: '1.2', fill: 'current', stroke: 'none' },
    { type: 'path', d: 'M6 13.5l3-1.5-3-1.5', fill: 'none' },
    { type: 'line', x1: '11', y1: '12', x2: '11', y2: '15' },
    { type: 'ellipse', cx: '18', cy: '15.5', rx: '2.5', ry: '3', fill: 'none' },
  ],
};

const elements = icons[name] ?? icons['mkt-code'];
---

<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width={strokeWidth}
  stroke-linecap="round"
  stroke-linejoin="round"
  class={cn(sizes[size], 'shrink-0', className)}
  aria-hidden="true"
>
  {elements.map((el) => {
    const { type, fill, stroke, 'stroke-dasharray': sda, 'stroke-width': sw, ...attrs } = el;
    const resolvedFill = fill === 'current' ? 'currentColor' : (fill ?? 'none');
    const resolvedStroke = stroke === 'none' ? 'none' : undefined; // inherit from parent when not suppressed
    if (type === 'circle') {
      return (
        <circle
          {...attrs}
          fill={resolvedFill}
          stroke={resolvedStroke}
          stroke-dasharray={sda}
          stroke-width={sw}
        />
      );
    }
    if (type === 'ellipse') {
      return (
        <ellipse
          {...attrs}
          fill={resolvedFill}
          stroke={resolvedStroke}
          stroke-dasharray={sda}
          stroke-width={sw}
        />
      );
    }
    if (type === 'rect') {
      return (
        <rect
          {...attrs}
          fill={resolvedFill}
          stroke={resolvedStroke}
          stroke-dasharray={sda}
          stroke-width={sw}
        />
      );
    }
    if (type === 'line') {
      return (
        <line
          {...attrs}
          fill={resolvedFill}
          stroke={resolvedStroke}
          stroke-dasharray={sda}
          stroke-width={sw}
        />
      );
    }
    // path (default)
    return (
      <path
        {...attrs}
        fill={resolvedFill}
        stroke={resolvedStroke}
        stroke-dasharray={sda}
        stroke-width={sw}
      />
    );
  })}
</svg>
